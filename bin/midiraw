#!/usr/bin/env python3

# Copyright (c) 2023 Dirk Leas
# This software is released under the MIT License.
# https://opensource.org/licenses/MIT

#
# midiraw - dump/debug midi file
#
# todo:
#   - research mido crashes when dumping certain files:
#       clav.toys/CLP FILES FROM DENNIS/2020 midi files/33__Karaoke-_Ach/03_BYE_BYE,_LOVE.MID
#       clav.toys/CLP FILES FROM DENNIS/2020 midi files/35__Karaoke-_New/09_CALIFORNIA_DR.MID
#       clav.toys/CLP FILES FROM DENNIS/2020 midi files/56__Smart_Key_So/01_AnniversarySo.MID
#       clav.toys/CLP FILES FROM DENNIS/2020 midi files/56__Smart_Key_So/03_FlyMeToMoon.MID
#       clav.toys/CLP FILES FROM DENNIS/2020 midi files/56__Smart_Key_So/05_Lover.MID
#       clav.toys/CLP FILES FROM DENNIS/2020 midi files/Cocktail Piano Music/ADIG08.mid
#       clav.toys/CLP FILES FROM DENNIS/2020 midi files/Cocktail Piano Music/Moment's Notice.mid
#       clav.toys/CLP FILES FROM DENNIS/2020 midi files/Cocktail Piano Music/rapinblu.mid
#

import typer, mido


def main(
    midi_file: str = typer.Argument(..., help="MIDI file to dump in raw format"),
    debug: bool = typer.Option(False, help="Enable debug mode"),
):
    """Dump a MIDI file in raw text format, optionally with hexdump output."""
    mido.MidiFile(midi_file, debug=debug).print_tracks()


if __name__ == "__main__":
    typer.run(main)
